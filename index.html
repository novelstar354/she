<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>日本語エコー翻訳機</title>
<style>
  :root{--bg:#f6f8fb;--card:#fff;--accent:#2563eb;--muted:#6b7280}
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,-apple-system,"Hiragino Kaku Gothic ProN","Noto Sans JP","游ゴシック体",sans-serif;background:linear-gradient(180deg,#e6eefc,#f7f9fc);color:#0f1722;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}
  .card{width:100%;max-width:880px;background:var(--card);border-radius:12px;padding:20px;box-shadow:0 10px 30px rgba(15,23,42,0.08)}
  h1{margin:0 0 6px;font-size:1.25rem}
  p.lead{margin:0 0 16px;color:var(--muted)}
  textarea{width:100%;min-height:140px;padding:12px;border-radius:8px;border:1px solid #e6eef8;background:transparent;color:inherit;font-size:1rem;resize:vertical}
  .controls{display:flex;gap:8px;margin-top:12px}
  button{background:var(--accent);border:0;padding:10px 14px;border-radius:8px;color:white;cursor:pointer;font-weight:600}
  button.ghost{background:transparent;color:var(--accent);border:1px solid rgba(37,99,235,0.12)}
  .result{margin-top:16px;padding:12px;border-radius:8px;background:#f8fafc;min-height:80px;border:1px solid #eef2ff}
  .small{font-size:0.9rem;color:var(--muted)}
  footer{margin-top:12px;color:var(--muted);font-size:0.85rem}
  @media (max-width:600px){.controls{flex-direction:column}}
</style>
</head>
<body>
  <div class="card">
    <h1>日本語エコー翻訳機</h1>
    <p class="lead">日本語を入力すると、そのまま日本語で返します（エコー）。日本語でない入力でもそのまま表示しますが、入力に日本語が含まれているかどうかを簡易判定して表示します。</p>

    <label for="source">入力</label>
    <textarea id="source" placeholder="ここにテキストを入力してください。例：こんにちは、元気ですか？">こんにちは、元気ですか？</textarea>

    <div class="controls">
      <button id="echo">返す（エコー）</button>
      <button class="ghost" id="detect">日本語判定</button>
      <button class="ghost" id="copy">結果をコピー</button>
      <button class="ghost" id="clear">クリア</button>
    </div>

    <div class="result" id="result">ここに結果が表示されます。</div>

    <footer>ショートカット: Ctrl/Cmd + Enter で「返す」を実行します。</footer>
  </div>

<script>
  const src = document.getElementById('source');
  const res = document.getElementById('result');
  const echoBtn = document.getElementById('echo');
  const detectBtn = document.getElementById('detect');
  const copyBtn = document.getElementById('copy');
  const clearBtn = document.getElementById('clear');

  // 日本語が含まれるかを判定する簡易関数（ひらがな・カタカナ・漢字の範囲）
  function containsJapanese(text){
    if(!text) return false;
    // Unicode ranges: Hiragana \u3040-\u309F, Katakana \u30A0-\u30FF, CJK Unified Ideographs \u4E00-\u9FFF
    return /[\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FFF]/.test(text);
  }

  function echo(){
    const text = src.value;
    if(!text.trim()){
      res.textContent = '入力が空です。テキストを入力してください。';
      return;
    }
    // 要求通り、日本語を入れたらそのまま日本語で返す（ここでは常にそのまま返す）
    res.textContent = text;
    res.dataset.detected = containsJapanese(text) ? 'ja' : 'none';
  }

  echoBtn.addEventListener('click', echo);

  detectBtn.addEventListener('click', ()=>{
    const text = src.value;
    if(!text.trim()){
      res.textContent = '入力が空です。テキストを入力してください。';
      return;
    }
    const ok = containsJapanese(text);
    res.textContent = ok ? '入力に日本語が含まれています（日本語判定: OK）。\n\n-> エコー結果:\n' + text : '入力に日本語が含まれていません。\n\n-> エコー結果:\n' + text;
    res.dataset.detected = ok ? 'ja' : 'none';
  });

  copyBtn.addEventListener('click', ()=>{
    const text = res.textContent || '';
    if(!text){ alert('コピーするテキストがありません'); return; }
    navigator.clipboard.writeText(text).then(()=>{
      copyBtn.textContent = 'コピーしました';
      setTimeout(()=>copyBtn.textContent='結果をコピー',1200);
    }).catch(()=>alert('コピーできませんでした'));
  });

  clearBtn.addEventListener('click', ()=>{
    src.value = '';
    res.textContent = 'ここに結果が表示されます。';
    delete res.dataset.detected;
  });

  // Ctrl/Cmd + Enter で実行
  src.addEventListener('keydown',(e)=>{
    if((e.ctrlKey || e.metaKey) && e.key === 'Enter'){
      e.preventDefault();
      echo();
    }
  });
</script>
</body>
</html>
